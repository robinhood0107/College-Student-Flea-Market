<!DOCTYPE html>
<html class="light" lang="ko">
<head>
  <%- include('../partials/head') %>
  <title>마이페이지 | Campus flea Market</title>
</head>
<body class="bg-main font-display">
  <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
    <div class="layout-container flex h-full grow flex-col">
      <%- include('../partials/header') %>
      
      <!-- 메인 콘텐츠 -->
      <main class="px-4 py-10 md:px-10 lg:px-20 xl:px-40 flex flex-1 justify-center">
        <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
          <!-- 프로필 섹션 -->
          <div class="profile-card">
            <div class="profile-content">
              <div class="profile-info">
                <!-- 프로필 이미지 -->
                <div class="profile-avatar" style='background-image: url("<%= typeof user !== 'undefined' && user.profile_image ? user.profile_image : '/uploads/default-avatar.jpg' %>");'></div>
                <!-- 프로필 정보 -->
                <div class="profile-details">
                  <p class="profile-name"><%= typeof user !== 'undefined' ? user.name : '사용자' %></p>
                  <p class="profile-email"><%= typeof user !== 'undefined' ? user.email : 'email@example.com' %></p>
                </div>
              </div>
              <!-- 프로필 수정 버튼 -->
              <a href="/user/edit" class="profile-edit-button">
                <span class="truncate">프로필 수정</span>
              </a>
            </div>
          </div>
          <!-- 탭 및 상품 목록 -->
          <div class="tab-menu">
            <!-- 탭 메뉴 -->
            <div class="tab-list">
              <div class="tab-nav">
                <a class="tab-item tab-item-active" href="/user/profile?tab=sales">
                  <p class="tab-text">판매 내역</p>
                </a>
                <a class="tab-item" href="/user/profile?tab=wishlist">
                  <p class="tab-text">찜한 목록</p>
                </a>
              </div>
            </div>
            <!-- 상품 그리드 -->
            <div class="user-product-grid">
              <% if (typeof products !== 'undefined' && products.length > 0) { %>
                <% products.forEach(product => { %>
                <a href="/product/<%= product.id %>" class="user-product-card">
                  <div class="user-product-image" style='background-image: url("<%= product.main_image || '/uploads/default.jpg' %>");'></div>
                  <div class="user-product-info">
                    <p class="user-product-title"><%= product.title %></p>
                    <p class="user-product-price">₩<%= product.price.toLocaleString() %></p>
                    <p class="user-product-status <%= product.status === '판매중' ? 'user-product-status-active' : 'user-product-status-inactive' %>"><%= product.status %></p>
                  </div>
                </a>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <p class="empty-state-text">등록된 상품이 없습니다.</p>
                </div>
              <% } %>
            </div>
          </div>
        </div>
      </main>
      <%- include('../partials/footer') %>
    </div>
  </div>
</body>
</html>

